<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Supabase</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .step {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .code {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        h1, h2 {
            color: #333;
        }
        .copy-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px 0;
        }
        .copy-btn:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Supabase</h1>
    
    <div class="step">
        <h2>1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø—Ä–æ–µ–∫—Ç—É</h2>
        <p>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ <a href="https://supabase.com/dashboard" target="_blank">Supabase Dashboard</a> –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:</p>
        <div class="code">
            URL: https://gidvpxxfgvivjbzfpxcg.supabase.co
        </div>
    </div>

    <div class="step">
        <h2>2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü —á–µ—Ä–µ–∑ SQL Editor</h2>
        <p>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ <strong>SQL Editor</strong> –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ –ø–æ—Ä—è–¥–∫—É:</p>
        
        <h3>2.1. –°–æ–∑–¥–∞–Ω–∏–µ enum –¥–ª—è —Ä–æ–ª–µ–π</h3>
        <div class="code" id="code1">
CREATE TYPE IF NOT EXISTS public.app_role AS ENUM ('admin', 'employee');
        </div>
        <button class="copy-btn" onclick="copyToClipboard('code1')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>

        <h3>2.2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∫–ª–∏–µ–Ω—Ç–æ–≤</h3>
        <div class="code" id="code2">
CREATE TABLE IF NOT EXISTS public.clients (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  full_name TEXT NOT NULL,
  contract_amount DECIMAL(12,2) NOT NULL CHECK (contract_amount > 0),
  installment_period INTEGER NOT NULL CHECK (installment_period > 0),
  first_payment DECIMAL(12,2) NOT NULL CHECK (first_payment >= 0),
  monthly_payment DECIMAL(12,2) NOT NULL CHECK (monthly_payment >= 0),
  remaining_amount DECIMAL(12,2) NOT NULL DEFAULT 0 CHECK (remaining_amount >= 0),
  total_paid NUMERIC DEFAULT 0,
  deposit_paid NUMERIC DEFAULT 0,
  deposit_target NUMERIC DEFAULT 50000,
  payment_day INTEGER NOT NULL DEFAULT 1 CHECK (payment_day >= 1 AND payment_day <= 31),
  contract_date DATE NOT NULL DEFAULT CURRENT_DATE,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  employee_id UUID REFERENCES auth.users(id),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
        </div>
        <button class="copy-btn" onclick="copyToClipboard('code2')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>

        <h3>2.3. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–æ—Ñ–∏–ª–µ–π</h3>
        <div class="code" id="code3">
CREATE TABLE IF NOT EXISTS public.profiles (
  id UUID NOT NULL DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID NOT NULL UNIQUE REFERENCES auth.users(id) ON DELETE CASCADE,
  full_name TEXT,
  created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),
  updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()
);
        </div>
        <button class="copy-btn" onclick="copyToClipboard('code3')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>

        <h3>2.4. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
        <div class="code" id="code4">
CREATE TABLE IF NOT EXISTS public.user_roles (
    id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id uuid REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
    role app_role NOT NULL DEFAULT 'employee',
    created_at timestamp with time zone NOT NULL DEFAULT now(),
    updated_at timestamp with time zone NOT NULL DEFAULT now(),
    created_by uuid REFERENCES auth.users(id),
    UNIQUE (user_id)
);
        </div>
        <button class="copy-btn" onclick="copyToClipboard('code4')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>

        <h3>2.5. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø–ª–∞—Ç–µ–∂–µ–π</h3>
        <div class="code" id="code5">
CREATE TABLE IF NOT EXISTS public.payments (
  id UUID NOT NULL DEFAULT gen_random_uuid() PRIMARY KEY,
  client_id UUID NOT NULL REFERENCES public.clients(id) ON DELETE CASCADE,
  payment_number INTEGER NOT NULL,
  original_amount NUMERIC NOT NULL,
  custom_amount NUMERIC,
  due_date DATE NOT NULL,
  is_completed BOOLEAN NOT NULL DEFAULT false,
  payment_type TEXT NOT NULL DEFAULT 'monthly',
  completed_at TIMESTAMP WITH TIME ZONE,
  created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),
  updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),
  user_id UUID NOT NULL REFERENCES auth.users(id),
  UNIQUE(client_id, payment_number)
);
        </div>
        <button class="copy-btn" onclick="copyToClipboard('code5')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>

        <h3>2.6. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —á–µ–∫–æ–≤</h3>
        <div class="code" id="code6">
CREATE TABLE IF NOT EXISTS public.payment_receipts (
  id UUID NOT NULL DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID NOT NULL,
  client_id UUID NOT NULL,
  payment_id UUID NULL REFERENCES public.payments(id) ON DELETE CASCADE,
  file_name TEXT NOT NULL,
  file_path TEXT NOT NULL,
  file_size INTEGER NOT NULL,
  mime_type TEXT NOT NULL,
  uploaded_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),
  created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),
  updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()
);
        </div>
        <button class="copy-btn" onclick="copyToClipboard('code6')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>

    <div class="step">
        <h2>3. –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤</h2>
        <div class="code" id="code7">
-- –ò–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞
CREATE INDEX IF NOT EXISTS idx_clients_full_name ON public.clients USING gin(to_tsvector('russian', full_name));

-- –ò–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É
CREATE INDEX IF NOT EXISTS idx_clients_employee_id ON public.clients(employee_id);

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã –ø–ª–∞—Ç–µ–∂–µ–π
CREATE INDEX IF NOT EXISTS idx_payments_client_id ON public.payments(client_id);
CREATE INDEX IF NOT EXISTS idx_payments_user_id ON public.payments(user_id);
CREATE INDEX IF NOT EXISTS idx_payments_due_date ON public.payments(due_date);
        </div>
        <button class="copy-btn" onclick="copyToClipboard('code7')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>

    <div class="step">
        <h2>4. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π</h2>
        <div class="code" id="code8">
-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è timestamp
CREATE OR REPLACE FUNCTION public.update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
CREATE OR REPLACE FUNCTION public.get_user_role(user_uuid uuid)
RETURNS app_role
LANGUAGE sql
STABLE
SECURITY DEFINER
SET search_path = public
AS $$
    SELECT role FROM public.user_roles WHERE user_id = user_uuid;
$$;

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–æ–º
CREATE OR REPLACE FUNCTION public.is_admin(user_uuid uuid DEFAULT auth.uid())
RETURNS boolean
LANGUAGE sql
STABLE
SECURITY DEFINER
SET search_path = public
AS $$
    SELECT EXISTS (
        SELECT 1 FROM public.user_roles 
        WHERE user_id = user_uuid AND role = 'admin'
    );
$$;

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –∏ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
CREATE OR REPLACE FUNCTION public.handle_new_user()
RETURNS trigger
LANGUAGE plpgsql
SECURITY DEFINER 
SET search_path = public
AS $$
BEGIN
  -- –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  INSERT INTO public.profiles (user_id, full_name)
  VALUES (NEW.id, NEW.raw_user_meta_data->>'full_name');
  
  -- –°–æ–∑–¥–∞–µ–º —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ—Ç—Ä—É–¥–Ω–∏–∫)
  INSERT INTO public.user_roles (user_id, role)
  VALUES (NEW.id, 'employee'::app_role)
  ON CONFLICT (user_id) DO NOTHING;
  
  RETURN NEW;
END;
$$;

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞
CREATE OR REPLACE FUNCTION public.create_first_admin()
RETURNS void
LANGUAGE plpgsql
SECURITY DEFINER
SET search_path = public
AS $$
BEGIN
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –∞–¥–º–∏–Ω—ã
    IF NOT EXISTS (SELECT 1 FROM public.user_roles WHERE role = 'admin') THEN
        -- –°–æ–∑–¥–∞–µ–º –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞ –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        INSERT INTO public.user_roles (user_id, role)
        SELECT id, 'admin'::app_role 
        FROM auth.users 
        ORDER BY created_at ASC 
        LIMIT 1
        ON CONFLICT (user_id) DO NOTHING;
    END IF;
END;
$$;
        </div>
        <button class="copy-btn" onclick="copyToClipboard('code8')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>

    <div class="step">
        <h2>5. –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤</h2>
        <div class="code" id="code9">
-- –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è updated_at
CREATE TRIGGER update_clients_updated_at
    BEFORE UPDATE ON public.clients
    FOR EACH ROW
    EXECUTE FUNCTION public.update_updated_at_column();

CREATE TRIGGER update_profiles_updated_at
  BEFORE UPDATE ON public.profiles
  FOR EACH ROW
  EXECUTE FUNCTION public.update_updated_at_column();

CREATE TRIGGER update_user_roles_updated_at
    BEFORE UPDATE ON public.user_roles
    FOR EACH ROW
    EXECUTE FUNCTION public.update_updated_at_column();

CREATE TRIGGER update_payments_updated_at
  BEFORE UPDATE ON public.payments
  FOR EACH ROW
  EXECUTE FUNCTION public.update_updated_at_column();

CREATE TRIGGER update_payment_receipts_updated_at
BEFORE UPDATE ON public.payment_receipts
FOR EACH ROW
EXECUTE FUNCTION public.update_updated_at_column();

-- –¢—Ä–∏–≥–≥–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
DROP TRIGGER IF EXISTS on_auth_user_created ON auth.users;
CREATE TRIGGER on_auth_user_created
  AFTER INSERT ON auth.users
  FOR EACH ROW EXECUTE FUNCTION public.handle_new_user();
        </div>
        <button class="copy-btn" onclick="copyToClipboard('code9')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>

    <div class="step">
        <h2>6. –í–∫–ª—é—á–µ–Ω–∏–µ RLS –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫</h2>
        <div class="code" id="code10">
-- –í–∫–ª—é—á–µ–Ω–∏–µ RLS –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
ALTER TABLE public.clients ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.user_roles ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.payments ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.payment_receipts ENABLE ROW LEVEL SECURITY;

-- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è profiles
CREATE POLICY "Users can view their own profile" 
ON public.profiles 
FOR SELECT 
TO authenticated
USING (auth.uid() = user_id);

CREATE POLICY "Users can create their own profile" 
ON public.profiles 
FOR INSERT 
TO authenticated
WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update their own profile" 
ON public.profiles 
FOR UPDATE 
TO authenticated
USING (auth.uid() = user_id)
WITH CHECK (auth.uid() = user_id);

-- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è user_roles
CREATE POLICY "Admins can view all user roles" 
ON public.user_roles 
FOR SELECT 
USING (public.is_admin());

CREATE POLICY "Users can view their own role" 
ON public.user_roles 
FOR SELECT 
USING (auth.uid() = user_id);

CREATE POLICY "Admins can insert user roles" 
ON public.user_roles 
FOR INSERT 
WITH CHECK (public.is_admin());

CREATE POLICY "Admins can update user roles" 
ON public.user_roles 
FOR UPDATE 
USING (public.is_admin())
WITH CHECK (public.is_admin());

CREATE POLICY "Admins can delete user roles" 
ON public.user_roles 
FOR DELETE 
USING (public.is_admin());

-- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è clients
CREATE POLICY "Users can view their assigned clients or admins can view all" 
ON public.clients 
FOR SELECT 
USING ((auth.uid() = employee_id) OR is_admin());

CREATE POLICY "Admins can create clients and assign employees" 
ON public.clients 
FOR INSERT 
WITH CHECK (is_admin() OR (auth.uid() = employee_id));

CREATE POLICY "Users can update their assigned clients or admins can update all" 
ON public.clients 
FOR UPDATE 
USING ((auth.uid() = employee_id) OR is_admin())
WITH CHECK ((auth.uid() = employee_id) OR is_admin());

CREATE POLICY "Admins can delete any clients, users can delete their assigned clients" 
ON public.clients 
FOR DELETE 
USING ((auth.uid() = employee_id) OR is_admin());

-- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è payments
CREATE POLICY "Users can view their own payments or admins can view all" 
ON public.payments 
FOR SELECT 
USING (auth.uid() = user_id OR public.is_admin());

CREATE POLICY "Users can create their own payments" 
ON public.payments 
FOR INSERT 
WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update their own payments or admins can update all" 
ON public.payments 
FOR UPDATE 
USING (auth.uid() = user_id OR public.is_admin())
WITH CHECK (auth.uid() = user_id OR public.is_admin());

CREATE POLICY "Users can delete their own payments or admins can delete all" 
ON public.payments 
FOR DELETE 
USING (auth.uid() = user_id OR public.is_admin());

-- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è payment_receipts
CREATE POLICY "Users can view their own receipts or admins can view all" 
ON public.payment_receipts 
FOR SELECT 
USING (auth.uid() = user_id OR public.is_admin());

CREATE POLICY "Users can create their own receipts" 
ON public.payment_receipts 
FOR INSERT 
WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update their own receipts or admins can update all" 
ON public.payment_receipts 
FOR UPDATE 
USING (auth.uid() = user_id OR public.is_admin());

CREATE POLICY "Users can delete their own receipts or admins can delete all" 
ON public.payment_receipts 
FOR DELETE 
USING (auth.uid() = user_id OR public.is_admin());
        </div>
        <button class="copy-btn" onclick="copyToClipboard('code10')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>

    <div class="step">
        <h2>7. –°–æ–∑–¥–∞–Ω–∏–µ storage bucket –¥–ª—è —á–µ–∫–æ–≤</h2>
        <div class="code" id="code11">
INSERT INTO storage.buckets (id, name, public) VALUES ('receipts', 'receipts', false) ON CONFLICT (id) DO NOTHING;
        </div>
        <button class="copy-btn" onclick="copyToClipboard('code11')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>

    <div class="step">
        <h2>8. Storage –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —á–µ–∫–æ–≤</h2>
        <div class="code" id="code12">
CREATE POLICY "Users can view their own receipt files" 
ON storage.objects 
FOR SELECT 
USING (bucket_id = 'receipts' AND auth.uid()::text = (storage.foldername(name))[1]);

CREATE POLICY "Users can upload their own receipt files" 
ON storage.objects 
FOR INSERT 
WITH CHECK (bucket_id = 'receipts' AND auth.uid()::text = (storage.foldername(name))[1]);

CREATE POLICY "Users can update their own receipt files" 
ON storage.objects 
FOR UPDATE 
USING (bucket_id = 'receipts' AND auth.uid()::text = (storage.foldername(name))[1]);

CREATE POLICY "Users can delete their own receipt files" 
ON storage.objects 
FOR DELETE 
USING (bucket_id = 'receipts' AND auth.uid()::text = (storage.foldername(name))[1]);
        </div>
        <button class="copy-btn" onclick="copyToClipboard('code12')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>

    <div class="step">
        <h2>9. –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞</h2>
        <div class="code" id="code13">
-- –°–æ–∑–¥–∞–µ–º –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞ –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –∞–¥–º–∏–Ω–æ–≤ –µ—â–µ –Ω–µ—Ç
SELECT public.create_first_admin();
        </div>
        <button class="copy-btn" onclick="copyToClipboard('code13')">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>

    <div class="step">
        <h2>10. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</h2>
        <p>–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:</p>
        <ol>
            <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ <strong>Supabase Dashboard ‚Üí Table Editor</strong></li>
            <li>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã</li>
            <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã</li>
            <li>–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</li>
        </ol>
    </div>

    <div class="warning">
        <strong>‚ö†Ô∏è –í–∞–∂–Ω–æ:</strong> –í—ã–ø–æ–ª–Ω—è–π—Ç–µ SQL –∑–∞–ø—Ä–æ—Å—ã –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, —Ç–∞–∫ –∫–∞–∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö.
    </div>

    <div class="success">
        <strong>‚úÖ –ì–æ—Ç–æ–≤–æ!</strong> –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤–∞—à–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.
    </div>

    <script>
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent;
            navigator.clipboard.writeText(text).then(function() {
                alert('–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
            }, function(err) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏: ', err);
            });
        }
    </script>
</body>
</html>
